import{m as D,j as E,e as b,a as i,c as a,b as e,g as m,h as k,f as h,w as S,F as $,k as x,d as U,L as y,n as I,t as _,x as f}from"./index.3788fcc5.js";const q={class:"row align-items-end"},B={class:"col"},N=["disabled"],A=e("label",{for:"itemName",class:"form-label"},"\u540D\u7A31",-1),L={class:"col-2"},P=["disabled"],O=e("label",{for:"itemCount",class:"form-label"},"\u6578\u91CF",-1),T={class:"col-3 col-lg-2"},j=["disabled"],F=e("label",{for:"itemProportion",class:"form-label"},"\u6A5F\u7387 (%)",-1),Q={class:"col-auto"},z=["disabled"],G={__name:"LotteryToolAddItem",props:D({mode_lock:Boolean},{items:{},itemsModifiers:{}}),emits:["update:items"],setup(g){const n=g,d=E(g,"items"),o=b({title:"",imgSrc:"",count:1,proportion:1});function v(){d.value.push({id:d.value.length,title:o.value.title,imgSrc:"",proportion:o.value.proportion,origin_count:o.value.count,rest_count:o.value.count})}return(p,c)=>(i(),a("div",q,[e("div",B,[e("fieldset",{disabled:n.mode_lock},[A,m(e("input",{type:"text",class:"form-control",id:"itemName",placeholder:"\u8ACB\u8F38\u5165\u540D\u7A31","onUpdate:modelValue":c[0]||(c[0]=r=>o.value.title=r)},null,512),[[k,o.value.title]])],8,N)]),e("div",L,[e("fieldset",{disabled:n.mode_lock},[O,m(e("input",{type:"number",class:"form-control",id:"itemCount",min:"1","onUpdate:modelValue":c[1]||(c[1]=r=>o.value.count=r)},null,512),[[k,o.value.count]])],8,P)]),e("div",T,[e("fieldset",{disabled:n.mode_lock},[F,m(e("input",{type:"number",class:"form-control",id:"itemProportion",min:"1","onUpdate:modelValue":c[2]||(c[2]=r=>o.value.proportion=r)},null,512),[[k,o.value.proportion]])],8,j)]),e("div",Q,[e("button",{disabled:n.mode_lock,type:"button",class:"btn btn-secondary",onClick:v},"\u65B0\u589E",8,z)])]))}},H={class:"lettery-wrap"},J={class:"container"},K={class:"row row-gap-3"},W=e("div",{class:"col-12"},[e("h2",null,"\u62BD\u734E\u5DE5\u5177")],-1),X={class:"col-12 col-lg-5"},Y={class:"alert alert-warning mt-3",role:"alert"},Z=e("h4",null,"\u62BD\u734E\u8A18\u9304",-1),ee={key:0},te={key:1},oe={class:"fs-5"},le={class:"col-12 col-lg-7"},se={class:"row row-gap-3"},ne={class:"col-12"},ie={class:"col-12"},ae={class:"alert alert-light",role:"alert"},ce={class:"row row-gap-3"},re=e("div",{class:"col"},[e("h4",null,"\u734E\u9805")],-1),de={class:"col-12 col-lg-auto"},ue=["disabled"],_e={class:"form-check form-check-inline"},me=e("label",{class:"form-check-label",for:"inlineRadioA"},"\u5747\u52FB\u5206\u914D",-1),ve={class:"form-check form-check-inline"},pe=e("label",{class:"form-check-label",for:"inlineRadioQ"},"\u9650\u5236\u6578\u91CF",-1),he={class:"form-check form-check-inline"},fe=e("label",{class:"form-check-label",for:"inlineRadioP"},"\u9650\u5236\u6A5F\u7387",-1),be={class:"col-12"},ge={key:0},ke={key:1},ye={class:"fs-5"},we={key:0},$e={key:1},xe=["onClick"],Ce={key:2},Re=e("div",{class:"col"},[e("span",{class:"text-danger"},"\u203B \u958B\u734E\u5F8C\u4E0D\u53EF\u518D\u8ABF\u6574\u734E\u9805")],-1),Ve={__name:"LotteryTool",setup(g){const n=b("average"),d=h(()=>!(c.value.length<=0)),o=b([{id:0,title:"A\u8CDE",imgSrc:"",proportion:10,origin_count:1,rest_count:1},{id:1,title:"B\u8CDE",imgSrc:"",proportion:20,origin_count:3,rest_count:3},{id:2,title:"C\u8CDE",imgSrc:"",proportion:30,origin_count:5,rest_count:5},{id:3,title:"D\u8CDE",imgSrc:"",proportion:40,origin_count:5,rest_count:5}]),v=h(()=>{let s=0;return o.value.forEach(l=>{s+=l.proportion}),s}),p=h(()=>{let s=[];switch(n.value){case"quantity":o.value.forEach(l=>{for(let t=0;t<l.rest_count;t++)s.push(l.id)});break;case"probability":o.value.forEach(l=>{for(let t=0;t<l.proportion;t++)s.push(l.id)});break;case"average":o.value.forEach(l=>{s.push(l.id)});break}return s}),c=b([]);S(c.value,s=>{s.length>0&&(d.value=!0)});const r=h(()=>{let s=[];return c.value.forEach(l=>{s.push(o.value.filter(t=>t.id==l)[0])}),s});function C(s){!window.confirm("\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u7B46\u9805\u76EE\u55CE\uFF1F")||(o.value=o.value.filter(t=>t.id!=s))}function w(){c.value=[],n.value=="quantity"&&o.value.forEach(s=>{s.rest_count=s.origin_count})}function R(){!window.confirm("\u78BA\u5B9A\u8981\u91CD\u7F6E\u6240\u6709\u734E\u9805\u55CE\uFF1F(\u62BD\u734E\u7D00\u9304\u4E5F\u6703\u4E00\u4F75\u6E05\u9664)")||(o.value=[],w())}function M(){!window.confirm("\u78BA\u5B9A\u8981\u91CD\u65B0\u958B\u59CB\u55CE\uFF1F(\u62BD\u734E\u7D00\u9304\u4E5F\u6703\u4E00\u4F75\u6E05\u9664)")||w()}function V(){let s=p.value.length-1,l=null,t=null,u=null;switch(n.value){case"quantity":if(p.value.length<=0){alert("\u734E\u9805\u5DF2\u62BD\u53D6\u5B8C\u7562");return}do l=Math.round(Math.random()*s),t=p.value[l],u=o.value[t];while(u.rest_count<=0);u.rest_count--;break;case"probability":case"average":l=Math.round(Math.random()*s),t=p.value[l],u=o.value[t];break}alert(`\u606D\u559C\u7372\u5F97 ${u.title}!`),c.value.push(u.id)}return(s,l)=>(i(),a("div",H,[e("div",J,[e("div",K,[W,e("div",X,[e("button",{type:"button",class:"btn btn-warning fs-3",onClick:V},"\u62BD\u734E\uFF01"),e("div",Y,[Z,r.value.length<=0?(i(),a("p",ee,"\u76EE\u524D\u5C1A\u672A\u958B\u734E")):(i(),a("ol",te,[(i(!0),a($,null,x(r.value,t=>(i(),a("li",oe,_(t.title),1))),256))]))]),e("div",{class:"d-flex justify-content-end"},[e("button",{type:"button",class:"btn btn-danger",onClick:M},"\u91CD\u65B0\u958B\u59CB")])]),e("div",le,[e("div",se,[e("div",ne,[U(G,{items:o.value,"onUpdate:items":l[0]||(l[0]=t=>o.value=t),mode_lock:d.value},null,8,["items","mode_lock"])]),e("div",ie,[e("div",ae,[e("div",ce,[re,e("div",de,[e("fieldset",{disabled:d.value},[e("div",_e,[m(e("input",{class:"form-check-input",type:"radio",name:"modeRadioOptions",id:"inlineRadioA","onUpdate:modelValue":l[1]||(l[1]=t=>n.value=t),value:"average"},null,512),[[y,n.value]]),me]),e("div",ve,[m(e("input",{class:"form-check-input",type:"radio",name:"modeRadioOptions",id:"inlineRadioQ","onUpdate:modelValue":l[2]||(l[2]=t=>n.value=t),value:"quantity"},null,512),[[y,n.value]]),pe]),e("div",he,[m(e("input",{class:"form-check-input",type:"radio",name:"modeRadioOptions",id:"inlineRadioP","onUpdate:modelValue":l[3]||(l[3]=t=>n.value=t),value:"probability"},null,512),[[y,n.value]]),fe])],8,ue)]),e("div",be,[o.value.length<=0?(i(),a("p",ge,"\u76EE\u524D\u7121\u8A2D\u5B9A\u734E\u9805")):(i(),a("ul",ke,[(i(!0),a($,null,x(o.value,t=>(i(),a("li",ye,[e("span",null,_(t.title),1),n.value=="quantity"?(i(),a("span",we," ... "+_(t.rest_count)+"/"+_(t.origin_count),1)):f("",!0),n.value=="probability"?(i(),a("span",$e," ... "+_(t.proportion)+"%",1)):f("",!0),d.value?f("",!0):(i(),a("button",{key:2,type:"button",class:"btn btn-secondary ms-3 mt-1 mb-1",onClick:u=>C(t.id)},"\u522A\u9664",8,xe))]))),256))])),n.value=="probability"?(i(),a("span",Ce,[e("span",{class:I({"text-success":v.value==100,"text-danger":v.value!=100})},"\u203B \u76EE\u524D\u52A0\u7E3D\u70BA "+_(v.value)+"%",3)])):f("",!0)])])]),e("div",{class:"row"},[Re,e("div",{class:"col-auto"},[e("button",{type:"button",class:"btn btn-danger",onClick:R},"\u522A\u9664\u6240\u6709\u734E\u9805")])])])])])])])]))}};export{Ve as default};
