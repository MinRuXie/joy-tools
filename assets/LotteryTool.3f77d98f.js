import{j as V,e as v,a,c as r,b as t,g as p,h as g,f as k,w as M,F as C,k as R,d as S,K as y,n as U,t as _,x as f}from"./index.232ad3e1.js";const E={class:"row align-items-end"},D={class:"col"},N=t("label",{for:"itemName",class:"form-label"},"\u540D\u7A31",-1),q={class:"col-2"},A=t("label",{for:"itemCount",class:"form-label"},"\u6578\u91CF",-1),B={class:"col-2"},I=t("label",{for:"itemProportion",class:"form-label"},"\u6A5F\u7387 (%)",-1),P={__name:"LotteryToolAddItem",props:{items:{},itemsModifiers:{}},emits:["update:items"],setup(w){const n=V(w,"items"),i=v({title:"",imgSrc:"",count:1,proportion:1});function s(){n.value.push({id:n.value.length,title:i.value.title,imgSrc:"",proportion:i.value.proportion,origin_count:i.value.count,rest_count:i.value.count})}return(m,c)=>(a(),r("div",E,[t("div",D,[t("div",null,[N,p(t("input",{type:"text",class:"form-control",id:"itemName",placeholder:"\u8ACB\u8F38\u5165\u540D\u7A31","onUpdate:modelValue":c[0]||(c[0]=u=>i.value.title=u)},null,512),[[g,i.value.title]])])]),t("div",q,[t("div",null,[A,p(t("input",{type:"number",class:"form-control",id:"itemCount",min:"1","onUpdate:modelValue":c[1]||(c[1]=u=>i.value.count=u)},null,512),[[g,i.value.count]])])]),t("div",B,[t("div",null,[I,p(t("input",{type:"number",class:"form-control",id:"itemProportion",min:"1","onUpdate:modelValue":c[2]||(c[2]=u=>i.value.proportion=u)},null,512),[[g,i.value.proportion]])])]),t("div",{class:"col-auto"},[t("button",{type:"button",class:"btn btn-secondary",onClick:s},"\u65B0\u589E")])]))}},L={class:"lettery-wrap"},O={class:"container"},T={class:"row row-gap-3"},j=t("div",{class:"col-12"},[t("h2",null,"\u62BD\u734E\u5DE5\u5177")],-1),F={class:"col-12 col-lg-5"},Q={class:"alert alert-warning mt-3",role:"alert"},z=t("h4",null,"\u62BD\u734E\u8A18\u9304",-1),K={key:0},G={key:1},H={class:"fs-5"},J={class:"col-12 col-lg-7"},W={class:"row row-gap-3"},X={class:"col-12"},Y={class:"col-12"},Z={class:"alert alert-light",role:"alert"},tt={class:"row"},et=t("div",{class:"col"},[t("h4",null,"\u734E\u9805")],-1),ot={class:"col-auto"},lt=["disabled"],st={class:"form-check form-check-inline"},nt=t("label",{class:"form-check-label",for:"inlineRadioA"},"\u5747\u52FB\u5206\u914D",-1),it={class:"form-check form-check-inline"},at=t("label",{class:"form-check-label",for:"inlineRadioQ"},"\u9650\u5236\u6578\u91CF",-1),rt={class:"form-check form-check-inline"},ct=t("label",{class:"form-check-label",for:"inlineRadioP"},"\u9650\u5236\u6A5F\u7387",-1),ut={class:"col-12"},dt={key:0},_t={key:1},pt={class:"fs-5"},vt={key:0},mt={key:1},ht=["onClick"],ft={key:2},bt=t("span",{class:"text-danger"},"\u203B \u958B\u734E\u5F8C\u4E0D\u53EF\u518D\u8ABF\u6574\u734E\u9805",-1),kt={__name:"LotteryTool",setup(w){const n=v("average"),i=v(!1),s=v([{id:0,title:"A\u8CDE",imgSrc:"",proportion:10,origin_count:1,rest_count:1},{id:1,title:"B\u8CDE",imgSrc:"",proportion:20,origin_count:3,rest_count:3},{id:2,title:"C\u8CDE",imgSrc:"",proportion:30,origin_count:5,rest_count:5},{id:3,title:"D\u8CDE",imgSrc:"",proportion:40,origin_count:5,rest_count:5}]),m=k(()=>{let l=0;return s.value.forEach(o=>{l+=o.proportion}),l});function c(l){!window.confirm("\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u7B46\u9805\u76EE\u55CE\uFF1F")||(s.value=s.value.filter(e=>e.id!=l))}function u(){!window.confirm("\u78BA\u5B9A\u8981\u91CD\u7F6E\u6240\u6709\u734E\u9805\u55CE\uFF1F(\u62BD\u734E\u7D00\u9304\u4E5F\u6703\u4E00\u4F75\u91CD\u7F6E)")||(s.value=[])}const h=k(()=>{let l=[];switch(n.value){case"quantity":s.value.forEach(o=>{for(let e=0;e<o.rest_count;e++)l.push(o.id)});break;case"probability":s.value.forEach(o=>{for(let e=0;e<o.proportion;e++)l.push(o.id)});break;case"average":s.value.forEach(o=>{l.push(o.id)});break}return l}),b=v([]);M(b.value,l=>{l.length>0&&(i.value=!0)});const x=k(()=>{let l=[];return b.value.forEach(o=>{l.push(s.value.filter(e=>e.id==o)[0])}),l});function $(){let l=h.value.length-1,o=null,e=null,d=null;switch(n.value){case"quantity":if(h.value.length<=0){alert("\u734E\u9805\u5DF2\u62BD\u53D6\u5B8C\u7562");return}do o=Math.round(Math.random()*l),e=h.value[o],d=s.value[e];while(d.rest_count<=0);d.rest_count--;break;case"probability":case"average":o=Math.round(Math.random()*l),e=h.value[o],d=s.value[e];break}alert(`\u606D\u559C\u7372\u5F97 ${d.title}!`),b.value.push(d.id)}return(l,o)=>(a(),r("div",L,[t("div",O,[t("div",T,[j,t("div",F,[t("button",{type:"button",class:"btn btn-warning",onClick:$},"\u62BD\u734E"),t("div",Q,[z,x.value.length<=0?(a(),r("p",K,"\u76EE\u524D\u5C1A\u672A\u958B\u734E")):(a(),r("ol",G,[(a(!0),r(C,null,R(x.value,e=>(a(),r("li",H,_(e.title),1))),256))]))])]),t("div",J,[t("div",W,[t("div",X,[S(P,{items:s.value,"onUpdate:items":o[0]||(o[0]=e=>s.value=e)},null,8,["items"])]),t("div",Y,[t("div",Z,[t("div",tt,[et,t("div",ot,[t("fieldset",{disabled:i.value},[t("div",st,[p(t("input",{class:"form-check-input",type:"radio",name:"modeRadioOptions",id:"inlineRadioA","onUpdate:modelValue":o[1]||(o[1]=e=>n.value=e),value:"average"},null,512),[[y,n.value]]),nt]),t("div",it,[p(t("input",{class:"form-check-input",type:"radio",name:"modeRadioOptions",id:"inlineRadioQ","onUpdate:modelValue":o[2]||(o[2]=e=>n.value=e),value:"quantity"},null,512),[[y,n.value]]),at]),t("div",rt,[p(t("input",{class:"form-check-input",type:"radio",name:"modeRadioOptions",id:"inlineRadioP","onUpdate:modelValue":o[3]||(o[3]=e=>n.value=e),value:"probability"},null,512),[[y,n.value]]),ct])],8,lt)]),t("div",ut,[s.value.length<=0?(a(),r("p",dt,"\u76EE\u524D\u7121\u8A2D\u5B9A\u734E\u9805")):(a(),r("ul",_t,[(a(!0),r(C,null,R(s.value,e=>(a(),r("li",pt,[t("span",null,_(e.title),1),n.value=="quantity"?(a(),r("span",vt," ... "+_(e.rest_count)+"/"+_(e.origin_count),1)):f("",!0),n.value=="probability"?(a(),r("span",mt," ... "+_(e.proportion)+"%",1)):f("",!0),i.value?f("",!0):(a(),r("button",{key:2,type:"button",class:"btn btn-secondary ms-3 mt-1 mb-1",onClick:d=>c(e.id)},"\u522A\u9664",8,ht))]))),256))])),n.value=="probability"?(a(),r("span",ft,[t("span",{class:U({"text-success":m.value==100,"text-danger":m.value!=100})},"\u203B \u76EE\u524D\u52A0\u7E3D\u70BA "+_(m.value)+"%",3)])):f("",!0),bt])])]),t("div",{class:"d-flex justify-content-end"},[t("button",{type:"button",class:"btn btn-danger",onClick:u},"\u91CD\u7F6E\u734E\u9805")])])])])])])]))}};export{kt as default};
