(self["webpackChunkvue3_tools"]=self["webpackChunkvue3_tools"]||[]).push([[759],{2384:function(e,t,a){a(4603),a(7566),a(8721),function(e){var t,a={},n=window,o=console,r=(Math,"postMessage"),l="HackTimer.js by turuslan: ",i="Initialisation failed",c=0,s="hasOwnProperty",u=[].slice,d=n.Worker;function m(){do{c=2147483647>c?c+1:0}while(a[s](c));return c}if(!/MSIE 10/i.test(navigator.userAgent))try{e=n.URL.createObjectURL(new Blob(["var f={},p=postMessage,r='hasOwnProperty';onmessage=function(e){var d=e.data,i=d.i,t=d[r]('t')?d.t:0;switch(d.n){case'a':f[i]=setInterval(function(){p(i)},t);break;case'b':if(f[r](i)){clearInterval(f[i]);delete f[i]}break;case'c':f[i]=setTimeout(function(){p(i);if(f[r](i))delete f[i]},t);break;case'd':if(f[r](i)){clearTimeout(f[i]);delete f[i]}break}}"]))}catch(p){}if("undefined"!==typeof d)try{t=new d(e),n.setInterval=function(e,n){var o=m();return a[o]={c:e,p:u.call(arguments,2)},t[r]({n:"a",i:o,t:n}),o},n.clearInterval=function(e){a[s](e)&&(delete a[e],t[r]({n:"b",i:e}))},n.setTimeout=function(e,n){var o=m();return a[o]={c:e,p:u.call(arguments,2),t:!0},t[r]({n:"c",i:o,t:n}),o},n.clearTimeout=function(e){a[s](e)&&(delete a[e],t[r]({n:"d",i:e}))},t.onmessage=function(e){var t,r,i=e.data;if(a[s](i)&&(r=a[i],t=r.c,r[s]("t")&&delete a[i]),"string"==typeof t)try{t=new Function(t)}catch(c){o.log(l+"Error parsing callback code string: ",c)}"function"==typeof t&&t.apply(n,r.p)},t.onerror=function(e){o.log(e)},o.log(l+"Initialisation succeeded")}catch(p){o.log(l+i),o.error(p)}else o.log(l+i+" - HTML5 Web Worker is not supported")}("HackTimerWorker.min.js")},9848:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ce}});var n=a(6768);const o={class:"container"},r={class:"row"},l={class:"col-12"},i={class:"working-hours-calculation"};function c(e,t,a,c,s,u){const d=(0,n.g2)("WorkingHoursCalculationNotice"),m=(0,n.g2)("WorkingHoursCalculationHeader"),p=(0,n.g2)("WorkingHoursCalculationBody");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",r,[(0,n.Lk)("div",l,[(0,n.Lk)("section",i,[(0,n.bF)(d,{showCopyed:c.data.showCopyed},null,8,["showCopyed"]),(0,n.bF)(m,{ref:"headerRef",data:c.data,onEventWorkRecord:c.workRecord,onEventCopyTableData:c.copyTableData},null,8,["data","onEventWorkRecord","onEventCopyTableData"]),(0,n.bF)(p,{ref:"bodyRef",data:c.data,onEventEnableComment:c.enableComment,onEventRemoveRecord:c.removeRecord,onEventCopyTrData:c.copyTrData},null,8,["data","onEventEnableComment","onEventRemoveRecord","onEventCopyTrData"])])])])])}a(4114);var s=a(144),u=a(8077);a(2384);function d(e){return e.toString().padStart(2,"0")}function m(){let e=new Date,t=e.getFullYear(),a=d(e.getMonth()+1),n=d(e.getDate()),o=d(e.getHours()),r=d(e.getMinutes()),l=d(e.getSeconds());return`${t}-${a}-${n} ${o}:${r}:${l}`}function p(e){let t,a,n=document.body;if(document.createRange&&window.getSelection){t=document.createRange(),a=window.getSelection(),a.removeAllRanges();try{t.selectNodeContents(e),a.addRange(t)}catch(o){t.selectNode(e),a.addRange(t)}}else n.createTextRange&&(t=n.createTextRange(),t.moveToElementText(e),t.select());document.execCommand("Copy"),document.getSelection().removeAllRanges()}const f={key:0,class:"copyed-msg"};function b(e,t,a,o,r,l){return o.isShow?((0,n.uX)(),(0,n.CE)("div",f,"已複製到剪貼簿")):(0,n.Q3)("",!0)}var v={name:"WorkingHoursCalculationNotice",props:["showCopyed"],setup(e){let t=(0,s.lW)(e,"showCopyed");return{isShow:t}}},k=a(1241);const g=(0,k.A)(v,[["render",b]]);var h=g,y=a(4232),_=a(5130),C=a.p+"media/cuckoo-clock-trimmed.faee1e2a.mp3";const w={class:"container"},L={class:"row"},T={class:"col-12"},R={class:"upper-inner"},D={id:"js-timer",class:"timer-wrap"},E={class:"timer-text"},x={class:"btn-wrap"},S=["data-type"],W={class:"group-wrap"},H={class:"form-group"},$=(0,n.Lk)("label",{for:"chk-alert-sound"},"布穀提示音 (每小時播放)",-1),I={loop:"",preload:"auto",ref:"alertPlayer",class:"audio-player"},M=(0,n.Lk)("source",{src:C,type:"audio/mpeg"},null,-1),A=[M],N={class:"form-group"},P=(0,n.Lk)("label",{for:"chk-hour"},"時數進位為0.25的倍數 (灌水10分鐘以內)",-1);function U(e,t,a,o,r,l){return(0,n.uX)(),(0,n.CE)("section",null,[(0,n.Lk)("div",w,[(0,n.Lk)("div",L,[(0,n.Lk)("div",T,[(0,n.Lk)("div",R,[(0,n.Lk)("div",D,[(0,n.Lk)("span",E,(0,y.v_)(o.initData.timer_text),1)]),(0,n.Lk)("div",x,[(0,n.Lk)("button",{"data-type":o.initData.timer_btn_type,onClick:t[0]||(t[0]=e=>o.workRecord()),class:"text-btn"},(0,y.v_)(o.initData.timer_btn_text),9,S),(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>o.copyTableData()),class:"icon-btn copy-all","data-bs-container":"body","data-bs-toggle":"tooltip","data-bs-placement":"right",title:"複製表格到剪貼簿"})]),(0,n.Lk)("div",W,[(0,n.Lk)("fieldset",H,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"chk-alert-sound",id:"chk-alert-sound","onUpdate:modelValue":t[2]||(t[2]=e=>o.initData.alert_sound=e),onChange:t[3]||(t[3]=e=>o.controlPlayer())},null,544),[[_.lH,o.initData.alert_sound]]),$,(0,n.Lk)("button",{onClick:t[4]||(t[4]=e=>o.playSound()),class:"icon-btn play","data-bs-container":"body","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"試聽"}),(0,n.Lk)("button",{onClick:t[5]||(t[5]=e=>o.pauseSound()),class:"icon-btn pause","data-bs-container":"body","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"停止播放"}),(0,n.Lk)("audio",I,A,512)]),(0,n.Lk)("fieldset",N,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"chk-hour",id:"chk-hour","onUpdate:modelValue":t[6]||(t[6]=e=>o.initData.hours_magic=e)},null,512),[[_.lH,o.initData.hours_magic]]),P])])])])])])])}var X={name:"WorkingHoursCalculationHeader",props:["data"],emits:["eventWorkRecord","eventCopyTableData"],setup(e,t){let a=(0,s.lW)(e,"data"),n=(0,s.KR)(null);function o(){t.emit("eventWorkRecord")}function r(){t.emit("eventCopyTableData")}function l(){a.value.alert_sound&&(n.value.pause(),console.log("打勾"))}function i(){n.value.play(),console.log("試聽提示音")}function c(){n.value.pause(),console.log("停止播放提示音")}return{initData:a,alertPlayer:n,workRecord:o,copyTableData:r,controlPlayer:l,playSound:i,pauseSound:c}}};const F=(0,k.A)(X,[["render",U]]);var j=F;const B={class:"container"},K={class:"row"},O={class:"col-12"},Q={class:"container-inner"},V={class:"table-wrap"},z=(0,n.Lk)("table",{class:"table-header table table-hover",width:"100%"},[(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"日期"),(0,n.Lk)("th",null,"時段"),(0,n.Lk)("th",null,"時數"),(0,n.Lk)("th",null,"備註"),(0,n.Lk)("th",null,"操作")])],-1),Y={class:"table-body table table-hover",ref:"recordTable",width:"100%"},J={key:0},q={key:1},G={key:0,class:"comment-text"},Z=["data-id","onUpdate:modelValue","onBlur"],ee=["onClick"],te=["onClick","disabled"];function ae(e,t,a,o,r,l){return(0,n.uX)(),(0,n.CE)("section",null,[(0,n.Lk)("div",B,[(0,n.Lk)("div",K,[(0,n.Lk)("div",O,[(0,n.Lk)("div",Q,[(0,n.Lk)("div",V,[z,(0,n.Lk)("table",Y,[(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.initData.record_arr,((e,a)=>((0,n.uX)(),(0,n.CE)("tr",{key:a},[(0,n.Lk)("td",null,(0,y.v_)(o.formatTableData(e,"start-date")),1),(0,n.Lk)("td",null,(0,y.v_)(o.formatTableData(e,"start-time"))+"~"+(0,y.v_)(o.formatTableData(e,"end-time")),1),(0,n.Lk)("td",null,[o.initData.hours_magic?((0,n.uX)(),(0,n.CE)("span",J,(0,y.v_)(o.formatTableData(e,"magic-hours")),1)):(0,n.Q3)("",!0),o.initData.hours_magic?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",q,(0,y.v_)(o.formatTableData(e,"real-hours")),1))]),(0,n.Lk)("td",null,[e.comment_editable?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",G,(0,y.v_)(e.r_comment),1)),e.comment_editable?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:1,type:"text","data-id":e.r_id,ref_for:!0,ref:o.setItemRef,"onUpdate:modelValue":t=>e.r_comment=t,onBlur:t=>o.enableComment(e.r_id,!1)},null,40,Z)),[[_.Jo,e.r_comment]]):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:t=>o.enableComment(e.r_id,!0),class:"icon-btn edit"},null,8,ee),(0,n.Lk)("button",{onClick:t=>o.removeRecord(e.r_id),disabled:e.del_btn_enable,class:"icon-btn del"},null,8,te),(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>o.copyTrData(e)),class:"icon-btn copy"})])])))),128))])],512)])])])])])])}var ne={name:"WorkingHoursCalculationBody",props:["data"],emits:["eventEnableComment","eventRemoveRecord","eventCopyTrData"],setup(e,t){const a=(0,s.lW)(e,"data");let o=(0,s.KR)(null),r=[];const l=function(e){e&&r.push({id:e.getAttribute("data-id"),el:e})};function i(e,t){let a=e.r_start?e.r_start.split(" ")[0].split("-"):void 0,n=e.r_start?e.r_start.split(" ")[1].split(":"):void 0,o=e.r_end?e.r_end.split(" ")[1].split(":"):void 0,r=e.r_end?((new Date(e.r_end).getTime()-new Date(e.r_start).getTime())/1e3/60/60).toFixed(2):void 0,l=r?(Math.ceil(4*r)/4).toFixed(2):r,i=l-r<=.167?l:r;switch(t){case"start-date":return e.r_start?`${a[1]}/${a[2]}`:"";case"start-time":return e.r_start?`${n[0]}:${n[1]}`:"";case"end-time":return e.r_end?`${o[0]}:${o[1]}`:"";case"real-hours":return r||"-";case"magic-hours":return i||"-"}}function c(e){t.emit("eventRemoveRecord",e)}function u(e,a){t.emit("eventEnableComment",e,a),(0,n.dY)((()=>{a&&r.forEach((t=>{t.id==e&&t.el.focus()}))}))}function d(e){t.emit("eventCopyTrData",e)}return(0,n.Ic)((()=>{r=[]})),(0,n.$u)((()=>{})),{initData:a,recordTable:o,setItemRef:l,formatTableData:i,removeRecord:c,enableComment:u,copyTrData:d}}};const oe=(0,k.A)(ne,[["render",ae]]);var re=oe,le={name:"WorkingHoursCalculation",components:{WorkingHoursCalculationNotice:h,WorkingHoursCalculationHeader:j,WorkingHoursCalculationBody:re},setup(){let e=(0,s.Kh)({record_arr:[],timer:null,timer_text:"00:00:00",timer_btn_type:"start",timer_btn_text:"Start",hours_magic:!1,alert_sound:!1,showCopyed:!1}),t=(0,s.KR)(null),a=(0,s.KR)(null);function o(){let a=m(),n=e.timer_btn_type;switch(n){case"start":e.timer_text="00:00:01",e.timer=setInterval((()=>{let n=new Date(a),o=new Date,r=Math.ceil((o.getTime()-n.getTime())/1e3),l=d(Math.floor(r/60/60)%24),i=d(Math.floor(r/60)%60),c=d(Math.floor(r)%60);e.timer_text=`${l}:${i}:${c}`,console.log(e.timer_text),e.alert_sound&&"00"==i&&"00"==c&&(t.value.alertPlayer.play(),console.log("整點提示音"))}),1e3),e.timer_btn_text="Stop",e.timer_btn_type="end",e.record_arr.push({r_id:e.record_arr.length,r_start:a,r_end:void 0,r_comment:void 0,del_btn_enable:!0,comment_editable:!1});break;case"end":clearInterval(e.timer),e.timer=null,e.timer_text="00:00:00",e.timer_btn_text="Start",e.timer_btn_type="start",e.record_arr[e.record_arr.length-1].r_end=a,e.record_arr[e.record_arr.length-1].del_btn_enable=!1;break}}function r(t){let a=window.confirm("確定要刪除此筆紀錄嗎？");a&&(e.record_arr=e.record_arr.filter((e=>e.r_id!=t)))}function l(t,a){for(let n of e.record_arr)n.r_id==t&&(n.comment_editable=a)}function i(){p(a.value.recordTable),e.showCopyed=!0,setTimeout((()=>{e.showCopyed=!1}),1e3)}function c(t){let a=t.target.parentNode.parentNode,n=a.cloneNode(!0),o=document.createElement("table");o.append(n),document.body.append(o),p(o),e.showCopyed=!0,setTimeout((()=>{e.showCopyed=!1}),1e3),o.remove()}return(0,n.sV)((()=>{new u.m_(document.body,{selector:"[data-bs-toggle='tooltip']"}),(0,n.dY)((()=>{}))})),{data:e,headerRef:t,bodyRef:a,workRecord:o,removeRecord:r,enableComment:l,copyTableData:i,copyTrData:c}}};const ie=(0,k.A)(le,[["render",c]]);var ce=ie},6955:function(e,t,a){"use strict";var n=a(2140),o=a(4901),r=a(4576),l=a(8227),i=l("toStringTag"),c=Object,s="Arguments"===r(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(a){}};e.exports=n?r:function(e){var t,a,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=u(t=c(e),i))?a:s?r(t):"Object"===(n=r(t))&&o(t.callee)?"Arguments":n}},2106:function(e,t,a){"use strict";var n=a(283),o=a(4913);e.exports=function(e,t,a){return a.get&&n(a.get,t,{getter:!0}),a.set&&n(a.set,t,{setter:!0}),o.f(e,t,a)}},2140:function(e,t,a){"use strict";var n=a(8227),o=n("toStringTag"),r={};r[o]="z",e.exports="[object z]"===String(r)},655:function(e,t,a){"use strict";var n=a(6955),o=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},2812:function(e){"use strict";var t=TypeError;e.exports=function(e,a){if(e<a)throw new t("Not enough arguments");return e}},4603:function(e,t,a){"use strict";var n=a(6840),o=a(9504),r=a(655),l=a(2812),i=URLSearchParams,c=i.prototype,s=o(c.append),u=o(c["delete"]),d=o(c.forEach),m=o([].push),p=new i("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&n(c,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return u(this,e);var n=[];d(this,(function(e,t){m(n,{key:t,value:e})})),l(t,1);var o,i=r(e),c=r(a),p=0,f=0,b=!1,v=n.length;while(p<v)o=n[p++],b||o.key===i?(b=!0,u(this,o.key)):f++;while(f<v)o=n[f++],o.key===i&&o.value===c||s(this,o.key,o.value)}),{enumerable:!0,unsafe:!0})},7566:function(e,t,a){"use strict";var n=a(6840),o=a(9504),r=a(655),l=a(2812),i=URLSearchParams,c=i.prototype,s=o(c.getAll),u=o(c.has),d=new i("a=1");!d.has("a",2)&&d.has("a",void 0)||n(c,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return u(this,e);var n=s(this,e);l(t,1);var o=r(a),i=0;while(i<n.length)if(n[i++]===o)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(e,t,a){"use strict";var n=a(3724),o=a(9504),r=a(2106),l=URLSearchParams.prototype,i=o(l.forEach);n&&!("size"in l)&&r(l,"size",{get:function(){var e=0;return i(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=759.6b93ff40.js.map