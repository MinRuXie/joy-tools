(self["webpackChunkvue3_tools"]=self["webpackChunkvue3_tools"]||[]).push([[188],{2384:function(e,t,n){n(4603),n(7566),n(8721),function(e){var t,n={},a=window,o=console,r=(Math,"postMessage"),l="HackTimer.js by turuslan: ",i="Initialisation failed",c=0,s="hasOwnProperty",u=[].slice,d=a.Worker;function m(){do{c=2147483647>c?c+1:0}while(n[s](c));return c}if(!/MSIE 10/i.test(navigator.userAgent))try{e=a.URL.createObjectURL(new Blob(["var f={},p=postMessage,r='hasOwnProperty';onmessage=function(e){var d=e.data,i=d.i,t=d[r]('t')?d.t:0;switch(d.n){case'a':f[i]=setInterval(function(){p(i)},t);break;case'b':if(f[r](i)){clearInterval(f[i]);delete f[i]}break;case'c':f[i]=setTimeout(function(){p(i);if(f[r](i))delete f[i]},t);break;case'd':if(f[r](i)){clearTimeout(f[i]);delete f[i]}break}}"]))}catch(p){}if("undefined"!==typeof d)try{t=new d(e),a.setInterval=function(e,a){var o=m();return n[o]={c:e,p:u.call(arguments,2)},t[r]({n:"a",i:o,t:a}),o},a.clearInterval=function(e){n[s](e)&&(delete n[e],t[r]({n:"b",i:e}))},a.setTimeout=function(e,a){var o=m();return n[o]={c:e,p:u.call(arguments,2),t:!0},t[r]({n:"c",i:o,t:a}),o},a.clearTimeout=function(e){n[s](e)&&(delete n[e],t[r]({n:"d",i:e}))},t.onmessage=function(e){var t,r,i=e.data;if(n[s](i)&&(r=n[i],t=r.c,r[s]("t")&&delete n[i]),"string"==typeof t)try{t=new Function(t)}catch(c){o.log(l+"Error parsing callback code string: ",c)}"function"==typeof t&&t.apply(a,r.p)},t.onerror=function(e){o.log(e)},o.log(l+"Initialisation succeeded")}catch(p){o.log(l+i),o.error(p)}else o.log(l+i+" - HTML5 Web Worker is not supported")}("HackTimerWorker.min.js")},3293:function(e,t,n){"use strict";function a(e){return e.toString().padStart(2,"0")}function o(e){return Math.round(100*(e+Number.EPSILON))/100}n.d(t,{R:function(){return o},m:function(){return a}})},6127:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ce}});var a=n(6768);const o={class:"container"},r={class:"row"},l={class:"col-12"},i={class:"working-hours-calculation"};function c(e,t,n,c,s,u){const d=(0,a.g2)("WorkingHoursCalculationNotice"),m=(0,a.g2)("WorkingHoursCalculationHeader"),p=(0,a.g2)("WorkingHoursCalculationBody");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",r,[(0,a.Lk)("div",l,[(0,a.Lk)("section",i,[(0,a.bF)(d,{showCopyed:c.data.showCopyed},null,8,["showCopyed"]),(0,a.bF)(m,{ref:"headerRef",data:c.data,onEventWorkRecord:c.workRecord,onEventCopyTableData:c.copyTableData},null,8,["data","onEventWorkRecord","onEventCopyTableData"]),(0,a.bF)(p,{ref:"bodyRef",data:c.data,onEventEnableComment:c.enableComment,onEventRemoveRecord:c.removeRecord,onEventCopyTrData:c.copyTrData},null,8,["data","onEventEnableComment","onEventRemoveRecord","onEventCopyTrData"])])])])])}n(4114);var s=n(144),u=n(8077),d=(n(2384),n(3293));function m(){let e=new Date,t=e.getFullYear(),n=(0,d.m)(e.getMonth()+1),a=(0,d.m)(e.getDate()),o=(0,d.m)(e.getHours()),r=(0,d.m)(e.getMinutes()),l=(0,d.m)(e.getSeconds());return`${t}-${n}-${a} ${o}:${r}:${l}`}function p(e){let t,n,a=document.body;if(document.createRange&&window.getSelection){t=document.createRange(),n=window.getSelection(),n.removeAllRanges();try{t.selectNodeContents(e),n.addRange(t)}catch(o){t.selectNode(e),n.addRange(t)}}else a.createTextRange&&(t=a.createTextRange(),t.moveToElementText(e),t.select());document.execCommand("Copy"),document.getSelection().removeAllRanges()}const f={key:0,class:"copyed-msg"};function b(e,t,n,o,r,l){return o.isShow?((0,a.uX)(),(0,a.CE)("div",f,"已複製到剪貼簿")):(0,a.Q3)("",!0)}var v={name:"WorkingHoursCalculationNotice",props:["showCopyed"],setup(e){let t=(0,s.lW)(e,"showCopyed");return{isShow:t}}},k=n(1241);const g=(0,k.A)(v,[["render",b]]);var h=g,y=n(4232),_=n(5130),C=n.p+"media/cuckoo-clock-trimmed.faee1e2a.mp3";const w={class:"container"},L={class:"row"},T={class:"col-12"},R={class:"upper-inner"},D={id:"js-timer",class:"timer-wrap"},E={class:"timer-text"},x={class:"btn-wrap"},S=["data-type"],W={class:"group-wrap"},H={class:"form-group"},$=(0,a.Lk)("label",{for:"chk-alert-sound"},"布穀提示音 (每小時播放)",-1),I={loop:"",preload:"auto",ref:"alertPlayer",class:"audio-player"},M=(0,a.Lk)("source",{src:C,type:"audio/mpeg"},null,-1),N=[M],P={class:"form-group"},A=(0,a.Lk)("label",{for:"chk-hour"},"時數進位為0.25的倍數 (灌水10分鐘以內)",-1);function U(e,t,n,o,r,l){return(0,a.uX)(),(0,a.CE)("section",null,[(0,a.Lk)("div",w,[(0,a.Lk)("div",L,[(0,a.Lk)("div",T,[(0,a.Lk)("div",R,[(0,a.Lk)("div",D,[(0,a.Lk)("span",E,(0,y.v_)(o.initData.timer_text),1)]),(0,a.Lk)("div",x,[(0,a.Lk)("button",{"data-type":o.initData.timer_btn_type,onClick:t[0]||(t[0]=e=>o.workRecord()),class:"text-btn"},(0,y.v_)(o.initData.timer_btn_text),9,S),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>o.copyTableData()),class:"icon-btn copy-all","data-bs-container":"body","data-bs-toggle":"tooltip","data-bs-placement":"right",title:"複製表格到剪貼簿"})]),(0,a.Lk)("div",W,[(0,a.Lk)("fieldset",H,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",name:"chk-alert-sound",id:"chk-alert-sound","onUpdate:modelValue":t[2]||(t[2]=e=>o.initData.alert_sound=e),onChange:t[3]||(t[3]=e=>o.controlPlayer())},null,544),[[_.lH,o.initData.alert_sound]]),$,(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>o.playSound()),class:"icon-btn play","data-bs-container":"body","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"試聽"}),(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>o.pauseSound()),class:"icon-btn pause","data-bs-container":"body","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"停止播放"}),(0,a.Lk)("audio",I,N,512)]),(0,a.Lk)("fieldset",P,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",name:"chk-hour",id:"chk-hour","onUpdate:modelValue":t[6]||(t[6]=e=>o.initData.hours_magic=e)},null,512),[[_.lH,o.initData.hours_magic]]),A])])])])])])])}var X={name:"WorkingHoursCalculationHeader",props:["data"],emits:["eventWorkRecord","eventCopyTableData"],setup(e,t){let n=(0,s.lW)(e,"data"),a=(0,s.KR)(null);function o(){t.emit("eventWorkRecord")}function r(){t.emit("eventCopyTableData")}function l(){n.value.alert_sound&&(a.value.pause(),console.log("打勾"))}function i(){a.value.play(),console.log("試聽提示音")}function c(){a.value.pause(),console.log("停止播放提示音")}return{initData:n,alertPlayer:a,workRecord:o,copyTableData:r,controlPlayer:l,playSound:i,pauseSound:c}}};const F=(0,k.A)(X,[["render",U]]);var j=F;const B={class:"container"},K={class:"row"},O={class:"col-12"},Q={class:"container-inner"},V={class:"table-wrap"},z=(0,a.Lk)("table",{class:"table-header table table-hover",width:"100%"},[(0,a.Lk)("thead",null,[(0,a.Lk)("th",null,"日期"),(0,a.Lk)("th",null,"時段"),(0,a.Lk)("th",null,"時數"),(0,a.Lk)("th",null,"備註"),(0,a.Lk)("th",null,"操作")])],-1),Y={class:"table-body table table-hover",ref:"recordTable",width:"100%"},J={key:0},q={key:1},G={key:0,class:"comment-text"},Z=["data-id","onUpdate:modelValue","onBlur"],ee=["onClick"],te=["onClick","disabled"];function ne(e,t,n,o,r,l){return(0,a.uX)(),(0,a.CE)("section",null,[(0,a.Lk)("div",B,[(0,a.Lk)("div",K,[(0,a.Lk)("div",O,[(0,a.Lk)("div",Q,[(0,a.Lk)("div",V,[z,(0,a.Lk)("table",Y,[(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.initData.record_arr,((e,n)=>((0,a.uX)(),(0,a.CE)("tr",{key:n},[(0,a.Lk)("td",null,(0,y.v_)(o.formatTableData(e,"start-date")),1),(0,a.Lk)("td",null,(0,y.v_)(o.formatTableData(e,"start-time"))+"~"+(0,y.v_)(o.formatTableData(e,"end-time")),1),(0,a.Lk)("td",null,[o.initData.hours_magic?((0,a.uX)(),(0,a.CE)("span",J,(0,y.v_)(o.formatTableData(e,"magic-hours")),1)):(0,a.Q3)("",!0),o.initData.hours_magic?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",q,(0,y.v_)(o.formatTableData(e,"real-hours")),1))]),(0,a.Lk)("td",null,[e.comment_editable?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",G,(0,y.v_)(e.r_comment),1)),e.comment_editable?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:1,type:"text","data-id":e.r_id,ref_for:!0,ref:o.setItemRef,"onUpdate:modelValue":t=>e.r_comment=t,onBlur:t=>o.enableComment(e.r_id,!1)},null,40,Z)),[[_.Jo,e.r_comment]]):(0,a.Q3)("",!0)]),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:t=>o.enableComment(e.r_id,!0),class:"icon-btn edit"},null,8,ee),(0,a.Lk)("button",{onClick:t=>o.removeRecord(e.r_id),disabled:e.del_btn_enable,class:"icon-btn del"},null,8,te),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>o.copyTrData(e)),class:"icon-btn copy"})])])))),128))])],512)])])])])])])}var ae={name:"WorkingHoursCalculationBody",props:["data"],emits:["eventEnableComment","eventRemoveRecord","eventCopyTrData"],setup(e,t){const n=(0,s.lW)(e,"data");let o=(0,s.KR)(null),r=[];const l=function(e){e&&r.push({id:e.getAttribute("data-id"),el:e})};function i(e,t){let n=e.r_start?e.r_start.split(" ")[0].split("-"):void 0,a=e.r_start?e.r_start.split(" ")[1].split(":"):void 0,o=e.r_end?e.r_end.split(" ")[1].split(":"):void 0,r=e.r_end?((new Date(e.r_end).getTime()-new Date(e.r_start).getTime())/1e3/60/60).toFixed(2):void 0,l=r?(Math.ceil(4*r)/4).toFixed(2):r,i=l-r<=.167?l:r;switch(t){case"start-date":return e.r_start?`${n[1]}/${n[2]}`:"";case"start-time":return e.r_start?`${a[0]}:${a[1]}`:"";case"end-time":return e.r_end?`${o[0]}:${o[1]}`:"";case"real-hours":return r||"-";case"magic-hours":return i||"-"}}function c(e){t.emit("eventRemoveRecord",e)}function u(e,n){t.emit("eventEnableComment",e,n),(0,a.dY)((()=>{n&&r.forEach((t=>{t.id==e&&t.el.focus()}))}))}function d(e){t.emit("eventCopyTrData",e)}return(0,a.Ic)((()=>{r=[]})),(0,a.$u)((()=>{})),{initData:n,recordTable:o,setItemRef:l,formatTableData:i,removeRecord:c,enableComment:u,copyTrData:d}}};const oe=(0,k.A)(ae,[["render",ne]]);var re=oe,le={name:"WorkingHoursCalculation",components:{WorkingHoursCalculationNotice:h,WorkingHoursCalculationHeader:j,WorkingHoursCalculationBody:re},setup(){let e=(0,s.Kh)({record_arr:[],timer:null,timer_text:"00:00:00",timer_btn_type:"start",timer_btn_text:"Start",hours_magic:!1,alert_sound:!1,showCopyed:!1}),t=(0,s.KR)(null),n=(0,s.KR)(null);function o(){let n=m(),a=e.timer_btn_type;switch(a){case"start":e.timer_text="00:00:01",e.timer=setInterval((()=>{let a=new Date(n),o=new Date,r=Math.ceil((o.getTime()-a.getTime())/1e3),l=(0,d.m)(Math.floor(r/60/60)%24),i=(0,d.m)(Math.floor(r/60)%60),c=(0,d.m)(Math.floor(r)%60);e.timer_text=`${l}:${i}:${c}`,console.log(e.timer_text),e.alert_sound&&"00"==i&&"00"==c&&(t.value.alertPlayer.play(),console.log("整點提示音"))}),1e3),e.timer_btn_text="Stop",e.timer_btn_type="end",e.record_arr.push({r_id:e.record_arr.length,r_start:n,r_end:void 0,r_comment:void 0,del_btn_enable:!0,comment_editable:!1});break;case"end":clearInterval(e.timer),e.timer=null,t.value.alertPlayer.pause(),console.log("關閉整點提示音"),e.timer_text="00:00:00",e.timer_btn_text="Start",e.timer_btn_type="start",e.record_arr[e.record_arr.length-1].r_end=n,e.record_arr[e.record_arr.length-1].del_btn_enable=!1;break}}function r(t){let n=window.confirm("確定要刪除此筆紀錄嗎？");n&&(e.record_arr=e.record_arr.filter((e=>e.r_id!=t)))}function l(t,n){for(let a of e.record_arr)a.r_id==t&&(a.comment_editable=n)}function i(){p(n.value.recordTable),e.showCopyed=!0,setTimeout((()=>{e.showCopyed=!1}),1e3)}function c(t){let n=t.target.parentNode.parentNode,a=n.cloneNode(!0),o=document.createElement("table");o.append(a),document.body.append(o),p(o),e.showCopyed=!0,setTimeout((()=>{e.showCopyed=!1}),1e3),o.remove()}return(0,a.sV)((()=>{new u.m_(document.body,{selector:"[data-bs-toggle='tooltip']"}),(0,a.dY)((()=>{}))})),(0,a.hi)((()=>{clearInterval(e.timer)})),{data:e,headerRef:t,bodyRef:n,workRecord:o,removeRecord:r,enableComment:l,copyTableData:i,copyTrData:c}}};const ie=(0,k.A)(le,[["render",c]]);var ce=ie},6955:function(e,t,n){"use strict";var a=n(2140),o=n(4901),r=n(4576),l=n(8227),i=l("toStringTag"),c=Object,s="Arguments"===r(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(n){}};e.exports=a?r:function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=u(t=c(e),i))?n:s?r(t):"Object"===(a=r(t))&&o(t.callee)?"Arguments":a}},2106:function(e,t,n){"use strict";var a=n(283),o=n(4913);e.exports=function(e,t,n){return n.get&&a(n.get,t,{getter:!0}),n.set&&a(n.set,t,{setter:!0}),o.f(e,t,n)}},2140:function(e,t,n){"use strict";var a=n(8227),o=a("toStringTag"),r={};r[o]="z",e.exports="[object z]"===String(r)},655:function(e,t,n){"use strict";var a=n(6955),o=String;e.exports=function(e){if("Symbol"===a(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},2812:function(e){"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},4603:function(e,t,n){"use strict";var a=n(6840),o=n(9504),r=n(655),l=n(2812),i=URLSearchParams,c=i.prototype,s=o(c.append),u=o(c["delete"]),d=o(c.forEach),m=o([].push),p=new i("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&a(c,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var a=[];d(this,(function(e,t){m(a,{key:t,value:e})})),l(t,1);var o,i=r(e),c=r(n),p=0,f=0,b=!1,v=a.length;while(p<v)o=a[p++],b||o.key===i?(b=!0,u(this,o.key)):f++;while(f<v)o=a[f++],o.key===i&&o.value===c||s(this,o.key,o.value)}),{enumerable:!0,unsafe:!0})},7566:function(e,t,n){"use strict";var a=n(6840),o=n(9504),r=n(655),l=n(2812),i=URLSearchParams,c=i.prototype,s=o(c.getAll),u=o(c.has),d=new i("a=1");!d.has("a",2)&&d.has("a",void 0)||a(c,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var a=s(this,e);l(t,1);var o=r(n),i=0;while(i<a.length)if(a[i++]===o)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(e,t,n){"use strict";var a=n(3724),o=n(9504),r=n(2106),l=URLSearchParams.prototype,i=o(l.forEach);a&&!("size"in l)&&r(l,"size",{get:function(){var e=0;return i(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=188.5dc78cb0.js.map